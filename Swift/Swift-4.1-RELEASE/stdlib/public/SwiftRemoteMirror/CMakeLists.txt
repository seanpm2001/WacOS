# HACK: Force this library to build with undefined symbols.
string(REGEX REPLACE "-Wl,-z,defs" "" CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS}")

# libswiftRemoteMirror.dylib should not have runtime dependencies; it's
# always built as a shared library.
if(SWIFT_BUILD_DYNAMIC_STDLIB OR SWIFT_BUILD_REMOTE_MIRROR)
  add_swift_library(swiftRemoteMirror SHARED TARGET_LIBRARY DONT_EMBED_BITCODE
      SwiftRemoteMirror.cpp
      LINK_LIBRARIES swiftReflection
      C_COMPILE_FLAGS ${SWIFT_RUNTIME_CXX_FLAGS}
      LINK_FLAGS ${SWIFT_RUNTIME_LINK_FLAGS}
      INSTALL_IN_COMPONENT swift-remote-mirror)
endif()
